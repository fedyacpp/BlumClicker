## BlumClicker

**Внимание: Я обновил ссылку для скачивания весов модели. Перекачайте файл весов, даже если вы уже его скачивали.**

Добейтесь ~100% точности [видео работы скрипта](https://photos.app.goo.gl/TYiW38Hc1g3Qqbnu5).

BlumClicker автоматизирует взаимодействие с Telegram, используя обнаружение объектов на изображениях через YOLOv5. Программа предназначена для обнаружения снежинок в Drop Game от Blum.

## Требования

* **NVIDIA GPU (Рекомендуется):** Скрипт работает только на видеокартах серии NVIDIA RTX. YOLOv5 сильно зависит от CUDA-ядер.
* **CPU (Альтернатива):** Вы можете запустить скрипт на процессоре, если у вас нет видеокарты NVIDIA, но это будет значительно медленнее и менее точно.

**Примечание:** Для работы скрипта необходима десктопная версия Telegram.

## TODO

- [x] Добавить больше информации в readme
- [x] Показать больше информации в терминале
- [x] Сделать скрипт более удобным для пользователя
- [x] Обучить модель для еще большей точности
- [x] Добавить настройки (например, кастомная задержка между/перед кликами)
- [x] Собрать еще больше скриншотов в датасет
- [ ] Добавить пункт для отображения дебаг окна с предиктами от нейронки
- [ ] Добавить лок фпс
- [ ] Добавить вероятность клика
- [ ] Добавить еще больше информации в readme

## Установка

Вам понадобится Python 3.x и CUDA для поддержки GPU. Тестировалось с Python 3.10 и CUDA 12.5.

### Шаги установки

1. **Получите CUDA Toolkit (для видеокарт NVIDIA):**
   - Перейдите на [страницу загрузки CUDA Toolkit](https://developer.nvidia.com/cuda-downloads).
   - Выберите вашу операционную систему и скачайте соответствующий установщик.
   - Скачайте и запустите установщик, затем следуйте шагам для завершения установки.

2. **Клонируйте репозиторий:**
   ```bash
   git clone https://github.com/fedyacpp/BlumClicker
   cd BlumClicker
   ```

3. **Установите PyTorch с поддержкой CUDA если у вас видеокарта серии RTX:**
   ```bash
   pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
   ```

   Если вы используете процессор (при этом обработка изображений СНС намного медленее):
   ```bash
   pip install torch torchvision torchaudio
   ```

4. **Установите остальные зависимости:**
   ```bash
   pip install -r requirements.txt
   ```

5. **Скачайте веса модели:**
   - Скачайте веса по [этой ссылке](https://drive.google.com/file/d/1lUTl4GulseoWs_vhPnYp0qkIYaumKMNg/view?usp=sharing).
   - Поместите файл `best.pt` в ту же директорию, где находится скрипт, или укажите путь до него при запуске скрипта.

### Проверка установки CUDA (для пользователей видеокарт NVIDIA)

Чтобы проверить установку CUDA, запустите скрипт `isCudaAvailable.py` из репозитория:

```bash
python isCudaAvailable.py
```

Если всё установлено правильно, вы увидите информацию о вашей CUDA и видеокарте.

### Запуск скрипта

Убедитесь, что окно Blum открыто в вашей десктопной версии Telegram перед запуском скрипта.

Для запуска скрипта просто выполните:
```bash
python main.py
```

## Выход из скрипта

Для выхода из скрипта нажмите `CTRL+Q` дважды.

## Особенности

- **Поиск окна Telegram:** Автоматически находит открытое окно Telegram на вашем компьютере.
- **Обнаружение объектов:** Использует YOLOv5 для обнаружения объектов в окне Telegram.
- **Автоматическое нажатие:** Кликает по обнаруженным объектам.

## Устранение неполадок

Если возникли проблемы, проверьте правильность установки CUDA и соответствие версий библиотек. Обращайте внимание на сообщения об ошибках в консоли и логах.

Нужна помощь? Откройте issue или напишите мне в [Discord](https://discord.com/users/fedyacpp) или [Telegram](t.me/fedyacpp).
